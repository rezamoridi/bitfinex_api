{% extends "base.html" %} {% block title %} Home {% endblock title %} {% block
message %}
<h6 style="color: rgb(214, 67, 67)">{{ error }}</h6>
{% endblock message %} {% block main_content %}
<style>
  /* Custom CSS */
  #tickerBox {
    width: 100px; /* Set width and height for circular shape */
    height: 100px;
    border-radius: 50%; /* Make it circular */
    padding: 10px;
    background-color: #f8f9fa; /* Bootstrap background color for light mode */
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Add some shadow for depth */
    position: relative; /* Position relative for absolute positioning of BTC logo */
    display: flex;
    justify-content: center;
    align-items: center;
  }

  #tickerValue {
    text-shadow: 10px;
    color: black;
    font-size: 24px;
    font-weight: bold;
  }

  #btcLogo {
    position: absolute; /* Position the BTC logo inside the box */
    top: 50%; /* Center vertically */
    left: 50%; /* Center horizontally */
    transform: translate(-50%, -50%); /* Center the logo precisely */
    width: 98%; /* Adjust size of the BTC logo */
    height: auto;
    opacity: 45%;
  }


</style>

<div class="container mt-5">
  <h1 class="text-center">Live Ticker</h1>
  <div id="tickerBox" class="text-center">
    <div id="tickerValue">{{ ticker[0] }}</div>
    <img
      id="btcLogo"
      src="https://upload.wikimedia.org/wikipedia/commons/4/46/Bitcoin.svg"
      alt="BTC Logo"
    />
  </div>
</div>
<div class="container" style="color: rebeccapurple">
  <h4 class="mt-4">Crypto price data into CSV</h4>
  <form action="" method="post" class="mt-4">
    <div class="form-group">
      <label for="symbol">Symbol: </label>
      <input
        type="text"
        name="symbol"
        id="symbol"
        list="symbols"
        class="form-control"
        required
      />
      <datalist id="symbols">
        <option value="BTCUSD"></option>
        <option value="ETHUSD"></option>
        <option value="DOGE:USD"></option>
      </datalist>
    </div>
    <br />

    <div class="form-row">
      <div class="form-group col-md-6">
        <label for="startdate">Start Date: </label>
        <input
          type="date"
          name="startdate"
          id="startdate"
          class="form-control"
          required
        />
      </div>
      <br />

      <div class="form-group col-md-6">
        <label for="enddate" id="enddate_lable">End Date: </label>
        <input type="date" name="enddate" id="enddate" class="form-control" />
      </div>
    </div>
    <br />

    <div class="form-group">
      <label for="timeframe">Time Frame:</label>
      <input
        list="timeframes"
        type="text"
        name="timeframe"
        id="timeframe"
        class="form-control"
        required
      />
      <datalist id="timeframes">
        <option value="1m"></option>
        <option value="30m"></option>
        <option value="1h"></option>
        <option value="1d"></option>
      </datalist>
    </div>
    <br />

    <button type="submit" class="btn btn-primary">Submit</button>
  </form>
  <br />
</div>
<script>
  function updateTicker() {
    // Make a request to fetch the updated ticker value
    fetch("/ticker")
      .then((response) => response.json())
      .then((data) => {
        // Update the ticker value
        document.getElementById("tickerValue").innerText = data[0];
      })
      .catch((error) => console.error("Error updating ticker:", error));
  }

  // Update the ticker every 5 seconds
  setInterval(updateTicker, 1000);

  // Initial update
  updateTicker();
</script>
{% endblock main_content %}
